" vim-plug loading
if empty(glob('~/.vim/autoload/plug.vim'))
  silent !curl -fLo ~/.vim/autoload/plug.vim --create-dirs
    \ https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
  autocmd VimEnter * PlugInstall --sync | source $MYVIMRC
end

call plug#begin('~/.vim/plugged')

" Plugins
Plug 'machakann/vim-highlightedyank'
Plug 'preservim/nerdtree'
Plug 'tpope/vim-surround'
Plug 'terryma/vim-multiple-cursors'
Plug 'vim-scripts/argtextobj.vim'
Plug 'easymotion/vim-easymotion'
Plug 'tpope/vim-commentary'

" Settings
" Show relative line numbers by default
set rnu
" Show absolute line number of current line
set nu
" Highlight matching braces
set showmatch
" Live Searching
set incsearch
" Highlight search
set hlsearch
" Show command as it's typed
set showcmd
" Ignore case by default
set ignorecase

" Keymappings
noremap <Space> <Nop>
let mapleader = "\<Space>"

" Plugin Mappings
map <C-t> :NERDTree<CR>
let g:argtextobj_pairs="[:],(:),<:>"
map <leader>F <Plug>(easymotion-s)
map <leader>f <Plug>(easymotion-f)
map <leader>md <A-x>
map <leader>mn <A-n>
map <leader>mp <A-p>
vmap S <Plug>VSurround

" Don't use Ex mode, use Q for formatting
map Q gq

" Clear search by pressing enter or F4
nnoremap <CR> :noh<CR><CR>
nnoremap <F4> :noh<CR>
" Toggle search case sensitivity with F6
nnoremap <F6> :set ignorecase! ignorecase?<CR>
" Yank whole line with Y
nnoremap Y y$

map <silent> w [w
map <silent> b [b
map <silent> e ]w
map <silent> ge ]b

" IntelliJ Stuff
nmap <leader>w :action SaveAll<cr>

nmap <leader>gd :action GotoDeclaration<cr>
nmap <leader>gi :action GotoImplementation<cr>
nmap <leader>ghm :action MethodHierarchy<cr>
nmap <leader>ghc :action CallHierarchy<cr>
nmap <leader>ght :action TypeHierarchy<cr>
nmap <leader>rn :action RenameElement<cr>

nmap <leader>q :action CloseEditor<cr>
nmap <leader>tp :action PinActiveTab<cr>
nmap <leader>ta :action EditorTabPopupMenu<cr>
nmap <leader>tr :action ReopenClosedTab<cr>
nmap <leader>tg :action EditorTabsGroup<cr>
nmap <leader>tsv :action SplitVertically<cr>
nmap <leader>tsh :action SplitHorizontally<cr>
map <leader>h :action PreviousTab<cr>
map <leader>l :action NextTab<cr>
map <leader><leader> :action RecentFiles<cr>

nmap <leader>rr :action Rerun<cr>
nmap <leader>rft :action RerunFailedTests<cr>

map <leader>aj :action GotoNextError<cr>
map <leader>ak :action GotoPreviousError<cr>

" Paste from yank register only
nnoremap <leader>p "0p
nnoremap <leader>P "0P
set ideajoin